# Совместная разработка

Главный смысл совместной разработки заключается в том, чтобы не наступить друг другу на ноги. Для этого нужно придерживаться некоторых правил:

* Договариваемся в чате ИФни, о чем будем писать
* Мы никак не трогаем ветку `main`
* Создаем и пользуемся своими ветками
* Сливаем все ветки через pull request
* Удаляем свои ветки за ненадобностью

## Пример

К примеру, кто-то взялся писать о подсветке синтаксиса. Для этого ему нужно:

* Подготовить среду разработки:
  * Склонировать хранилище:

    ```bash
    git clone https://github.com/QSPFoundation/qspfoundation.github.io.git
    ```

  * Зайти в папку с хранилищем и установить пакеты:

    ```bash
    cd qspfoundation.github.io
    npm install
    ```

  * Запустить live-серевер:

    ```bash
    npm run start
    ```

  * Перейти по ссылке в браузер

  Теперь страница в браузере с документацией будет автоматически обновляться с каждым сделанным изменением.
* Создать ветку `syntax-highlight`

  ```bash
  git checkout -b syntax-highlight
  ```

  Можно средствами редактора — без разницы.
* Создать файл `docs/syntax-highlighting.md` и начать писать в нем статью
* Добавить файл в git и закоммитить:

  ```bash
  git add docs/syntax-highlighting.md
  git commit -m "wip: мне было лень давать название"
  ```

  Сообщение можно давать какое-нибудь осмысленное, но всегда это получается, поэтому можно и так. Об осмысленности — ниже.
* Запушить на GitHub ветку:

  ```bash
  git push -u origin syntax-highlight
  ```

  Всё, теперь ветка лежит там. Чужие ветки не трогаем, а то запутаемся.

* Продолжить писать статью в `docs/syntax-highlighting.md`
* Добавить изменение файла в git и закоммитить:

  ```bash
  git add .
  git commit -m "wip: наконец-то дописал статью!"
  ```

* Запушить:

  ```bash
  git push
  ```

* Теперь один из нас делает pull request из этой ветки через GitHub. Там довольно хитро и надо показывать
* После чего pull request одобряем (при условии, что всё там хорошо задеплоилось (это определено в `.github/workflows/test-deploy.yml`))

  Одобрять, т.е. слить с веткой `main`, можно тремя способами:

  * `squash` — т.е. все коммиты с твоей ветки соединяются в один коммит

    Это надо, чтобы вот этот поток бессознательного:

    ```text
    wip: мне было лень давать название
    wip: наконец-то дописал статью!
    ```

    Превратить в один осмысленный:

    ```bash
    docs: write syntax highlighting article
    ```

  * `rebase` — эта штука сливает новые коммиты в `main`

    Если у тебя осмысленные коммиты, в духе:

    ```text
    docs(syntax-highlighting): start writing an article
    docs(syntax-highlighting): write shortly description of what syntax highlighting is
    ...
    ```

    Тогда это всё не стыдно кинуть прямо в `main` в таком виде.

  * еще что-то, что сливает ветку через коммит. Забыл, как называется

  Как только ветка сливается с `main`, автоматически запускается развертывание проекта (это настраивается в `.github/workflows\deploy.yml`), и через какое-то время можно будет увидеть изменения на сайте документации.

* Удалить ветку:

  Удалить ветку с GitHub'а:

  ```bash
  git push -d origin syntax-highlighting
  ```

  Удалить ветку у себя на компьютере:

  ```bash
  git branch -d syntax-highlighting
  ```
