# Совместная разработка

* Склонировать себе репозиторий

  ```bash
  git clone https://github.com/QSPFoundation/qspfoundation.github.io.git
  ```

* Зайти в папку с репозиторием и установить пакеты

  ```bash
  npm install
  ```

Дальше договариваемся в чате Ифни, о чем будем писать. К примеру, нужно написать о подсветке синтаксиса, тогда в примере покажем, как это работает.

Весь смысл дальнейшей инструкции заключается в том, что мы:

* не трогаем ветку `main`
* создаем и пользуемся своими ветками
* сливаем ветки через pull request
* удаляем свои ветки за ненадобностью

Сама инструкция:

* Создать ветку `syntax-highlight`

  ```bash
  git checkout -b syntax-highlight
  ```

  Можно средствами редактора — без разницы.
* Создаь файл `docs/syntax-highlighting.md` и начать писать в нем статью
* Добавить файл в git и закоммитить:

  ```bash
  git add docs/syntax-highlighting.md
  git commit -m "wip: мне было лень давать название"
  ```

  Сообщение можно давать какое-нибудь осмысленное, но всегда это получается, поэтому можно и так. Об осмысленности — ниже.
* Запушить на GitHub ветку:

  ```bash
  git push -u origin syntax-highlight
  ```

  Всё, теперь ветка лежит там. Чужие ветки не трогаем, а то запутаемся.

* Продолжить писать статью в `docs/syntax-highlighting.md`
* Добавить изменение файла в git и закоммитить:

  ```bash
  git add .
  git commit -m "wip: наконец-то дописал статью!"
  ```

* Запушить:

  ```bash
  git push
  ```

* Теперь один из нас делает pull request из этой ветки через GitHub. Там довольно хитро и надо показывать
* После чего pull request одобряем (при условии, что всё там хорошо задеплоилось (это определено в `.github/workflows/test-deploy.yml`))

  Одобрять, т.е. слить с веткой `main`, можно тремя способами:

  * `squash` — т.е. все коммиты с твоей ветки соединяются в один коммит

    Это надо, чтобы вот этот поток бессознательного:

    ```text
    wip: мне было лень давать название
    wip: наконец-то дописал статью!
    ```

    Превратить в один осмысленный:

    ```bash
    docs: write syntax highlighting article
    ```

  * `rebase` — эта штука сливает новые коммиты в `main`

    Если у тебя осмысленные коммиты, в духе:

    ```text
    docs(syntax-highlighting): start writing an article
    docs(syntax-highlighting): write shortly description of what syntax highlighting is
    ...
    ```

    Тогда это всё не стыдно кинуть прямо в `main` в таком виде.

  * еще что-то, что сливает ветку через коммит. Забыл, как называется

* Удалить ветку:

  Удалить ветку с GitHub'а:

  ```bash
  git push -d origin syntax-highlighting
  ```

  Удалить ветку у себя на компьютере:

  ```bash
  git branch -d syntax-highlighting
  ```
