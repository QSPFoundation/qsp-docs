---
author: fering
tags:
  - рефакторинг
  - Qsp.FSharp.Core
---

# Рефакторинг Qsp.FSharp.Core

Пришло время старый, четырехлетний код его отрефакторить, потому что без слез и жалости на него больно смотреть, но что самое худшее — его тяжело сопровождать.

Сейчас архитектура выглядит как-то так:

* `Qsp.Ast` — определение типов синтаксического дерева
* `Qsp.Defines` — определение предзаданных переменных, функций и процедур языка, а также их словесное описание, которое используется LSP. Сейчас является частью синтаксического дерева:

  ```fsharp
  and Expr =
      // ...
      | Func of Defines.PredefFunc PredefUndef * Expr list
  ```

* `Qsp.`
